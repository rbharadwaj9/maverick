<div class="project-item">
  <div class="project-image">
    {{ with .Resources.GetMatch "images/cover.png" }}
        {{ $thumb := .Resize "200x" }}
        <img src="{{ $thumb.RelPermalink }}" alt="{{ .Title }}">
    {{ else }}
        <!-- optional fallback if cover.png is missing -->
        <p>No cover image available.</p>
    {{ end }}
  </div>

  <div class="project-info">
    <!-- Title with optional link -->
    {{ if .Params.link }}
      <a href="{{ .Params.link }}" class="project-title">{{ .Params.title }}</a>
    {{ else }}
      <span class="project-title">{{ .Params.title }}</span>
    {{ end }}

    <!-- Subtitle / summary -->
    {{ if .Params.subtitle }}
      <div class="project-subtitle">{{ .Params.subtitle | markdownify }}</div>
    {{ end }}

    <!-- Date -->
    {{ $start := .Params.startDate }}
    {{ $end := .Params.endDate }}
    {{ $date := .Date }}
    <span class="project-date">
        {{ if $start }}
            {{ $start | dateFormat "Jan 2006" }} â€“
            {{ if $end }}
                {{ $end | dateFormat "Jan 2006" }}
            {{ else }}
                Present
            {{ end }}
        {{ else if $date }}
            {{ $date | dateFormat "Jan 2006" }}
        {{ else }}
            <!-- optional fallback if no date at all -->
            Unknown
        {{ end }}
    </span>

    <!-- Authors / collaborators -->
    {{ if .Params.authors }}
      <div class="project-authors">
        {{ range $index, $author := .Params.authors }}
          {{ if $index }}, {{ end }}
          {{ if $author.link }}
            <a href="{{ $author.link }}">{{ $author.name }}</a>
          {{ else }}
            {{ $author.name }}
          {{ end }}
        {{ end }}
      </div>
    {{ end }}

    <!-- Links -->
    {{ if .Params.links }}
      <div class="project-links">
        {{ range $index, $link := .Params.links }}
          {{ if $index }} | {{ end }}
          {{ $file := $.Resources.GetMatch $link.url }}
          {{ if $file }}
            [<a href="{{ $file.RelPermalink }}">{{ $link.text }}</a>]
          {{ else }}
            [<a href="{{ $link.url }}">{{ $link.text }}</a>]
          {{ end }}
        {{ end }}
      </div>
    {{ end }}

    <!-- Body -->
    <div class="project-body">
      {{ .Summary | safeHTML }}
    </div>
  </div>
</div>

